# Uni-X UserScript

[![JavaScript](https://img.shields.io/badge/JavaScript-ES6%2B-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![Tampermonkey](https://img.shields.io/badge/Manager-Tampermonkey-004838.svg)](https://www.tampermonkey.net/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)

> The missing power-user extension for Uni-X

Легковесный и эффективный скрипт для улучшения взаимодействия с образовательной платформой Uni-X (Almaty Management University). Стандартный интерфейс платформы накладывает искусственные ограничения на работу с контентом и просмотр лекций.

**Uni-X UserScript** снимает эти ограничения: модульное решение, работающее прямо в браузере. Позволяет копировать защищенный текст, мгновенно сохранять вопросы тестов и управлять просмотром видео без необходимости держать вкладку активной.

## Особенности

- **Smart Copy**: Разблокировка выделения текста (User Select) и копирование блоков вопросов/ответов одним кликом.
- **Active Tab Simulation**: Подмена событий `visibilityState` и `blur`. Платформа "думает", что вы всегда смотрите видео.
- **Video Skipper**: Перехват токенов просмотра (`VIDEO_WATCH_TOKEN`) и автоматическая отметка лекций как просмотренных.
- **Auth Bypass**: Возможность ручного ввода токена или логина/пароля прямо через скрипт, если сессия истекла.
- **Zero-Config**: Работает сразу после установки, не требует настройки сервера или сложного окружения.

## Установка

### 1. Подготовка
Вам понадобится менеджер пользовательских скриптов. Рекомендуется **Tampermonkey**:
- [Chrome / Edge / Brave](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
- [Firefox](https://addons.mozilla.org/en-US/firefox/addon/tampermonkey/)
- [Safari](https://apps.apple.com/us/app/tampermonkey/id1482490089)

### 2. Инсталляция
Нажмите на кнопку ниже или скачайте файл вручную. Tampermonkey автоматически предложит установку.

[![Install Script](https://img.shields.io/badge/Install-Click_Here-success?style=for-the-badge&logo=tampermonkey)](https://github.com/I3eka/uni-x-userscript/raw/main/uni-x-full.user.js)

*(Ссылка станет активной после загрузки файла `uni-x-full.user.js` в репозиторий)*

## Использование

### Копирование тестов (Quiz Mode)
Идеально для сохранения базы вопросов.

1.  Наведите курсор на блок с вопросом и вариантами ответов.
2.  Блок подсветится **зеленой рамкой**.
3.  Кликните по пустому месту в блоке.
4.  Текст вопроса и всех вариантов ответов скопируется в буфер обмена.

### Просмотр видео (Lecture Mode)

Скрипт работает в фоне.
1.  Откройте лекцию.
2.  Скрипт перехватит `loadedmetadata` видео.
3.  Если у вас есть сохраненный токен от предыдущего просмотра, видео может быть отмечено автоматически.
4.  Вкладку можно сворачивать — симуляция активности предотвратит паузу таймера.

## Как работает Under the Hood

Скрипт использует несколько векторов для модификации поведения страницы:

### 1. Token Interceptor
Скрипт переопределяет `localStorage.setItem`. Когда плеер сохраняет состояние видео (`unix-video-state`), скрипт извлекает JWT-токен, декодирует его (Base64) и проверяет поле `videoDuration`. Если условия соблюдены, токен сохраняется для последующей отправки запроса на `/api/lessons/{id}/watched`.

### 2. Event Spoofing
Для обхода детекторов неактивности (AFK), скрипт переписывает свойства документа:
```javascript
Object.defineProperty(document, 'visibilityState', { value: 'visible', writable: true });
Object.defineProperty(document, 'hidden', { value: false, writable: true });
```
Также блокируется распространение событий `blur` и `visibilitychange`.

### 3. DOM Injection
Для функции "Click-to-Copy" скрипт внедряет CSS стили (`user-select: text !important`) и вешает глобальный `EventListener`, который определяет границы блока вопроса по специфичным CSS-классам Tailwind (`md:pt-10`, `rounded-b-xl` и т.д.).

## Примечание

Данный проект (Uni-X UserScript) разработан **исключительно в образовательных и исследовательских целях**. Основная задача репозитория — демонстрация технических возможностей JavaScript (UserScripts) по взаимодействию с DOM-деревом, перехвату событий и работе с LocalStorage на стороне клиента.

**Пожалуйста, внимательно ознакомьтесь перед использованием:**

1.  **Ответственность:** Автор (I3eka) **не несет никакой ответственности** за любые последствия использования данного программного обеспечения. Это включает, но не ограничивается: блокировкой аккаунта, аннулированием результатов тестов, дисциплинарными взысканиями или отчислением из учебного заведения.
2.  **На свой страх и риск:** Программное обеспечение предоставляется по принципу «как есть» (AS IS). Используя этот скрипт, вы подтверждаете, что делаете это добровольно и принимаете на себя все риски, связанные с возможным нарушением правил использования платформы Uni-X или внутреннего устава университета.
3.  **Академическая честность:** Автор категорически не одобряет и не призывает к использованию данного инструмента для обмана системы контроля знаний, списывания или нарушения принципов академической честности.
4.  **Условия использования:** Этот код находится в открытом доступе для изучения. Если вы решите применить его на практике, ответственность за соблюдение этических и правовых норм лежит полностью на вас.

## License

MIT
